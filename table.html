<!DOCTYPE html>
<html>
  <head> </head>
  <body>
    <table id="output"></table>
    <script>
      function json2Table(json) {
        let cols = Object.keys(json[0]);

        //Map over columns, make headers,join into string
        let headerRow = cols.map((col) => `<th>${col}</th>`).join("");

        //map over array of json objs, for each row(obj) map over column values,
        //and return a td with the value of that object for its column
        //take that array of tds and join them
        //then return a row of the tds
        //finally join all the rows together
        let rows = json
          .map((row) => {
            let tds = cols.map((col) => `<td>${row[col]}</td>`).join("");
            return `<tr>${tds}</tr>`;
          })
          .join("");

        //build the table
        const table = `
            <table>
                <thead>
                    <tr>${headerRow}</tr>
                <thead>
                <tbody>
                    ${rows}
                <tbody>
            <table>`;

        return table;
      }

      data = [
        {
          trackName: "Althea - 2013 Remaster",
          artistName: "Grateful Dead",
          timeListened: 130719530,
        },
        {
          trackName: "Shine On You Crazy Diamond, Pts.",
          artistName: "Pink Floyd",
          timeListened: 100408622,
        },
        {
          trackName: "Sugaree - Live at P.N.E. Coliseu",
          artistName: "Grateful Dead",
          timeListened: 63046317,
        },
        {
          trackName: "Take Care",
          artistName: "Beach House",
          timeListened: 58139126,
        },
        {
          trackName: "Maggot Brain",
          artistName: "Funkadelic",
          timeListened: 55909657,
        },
        {
          trackName: "The Less I Know The Better",
          artistName: "Tame Impala",
          timeListened: 47377140,
        },
        {
          trackName: "Space Song",
          artistName: "Beach House",
          timeListened: 46928537,
        },
        {
          trackName: "Wish You Were Here - 2011 Remast",
          artistName: "Pink Floyd",
          timeListened: 45405930,
        },
        {
          trackName: "Deacon Blues",
          artistName: "Steely Dan",
          timeListened: 43114836,
        },
        {
          trackName: "Dogs - 2011 Remastered Version",
          artistName: "Pink Floyd",
          timeListened: 39800906,
        },
      ];

      output = document.getElementById("output");
      output.innerHTML = json2Table(data);
    </script>
  </body>
</html>
